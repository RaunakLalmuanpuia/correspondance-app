import{Q as $,a as y}from"./QBreadcrumbs-Cc0n6QiA.js";import{Q as B}from"./QSelect-BexRWrLA.js";import{Q}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-B9to8UDw.js";import{_ as j}from"./BackendLayout-CMp9Dp6j.js";import{r as d,c as u,w as q,o as L,a as O,b as T,d as w,e,f as l,t as n,u as C,g as b}from"./app-DsiMy1nO.js";import{B as A,L as I}from"./index-_fpHQH8N.js";import"./QField-BHCu9AsH.js";import"./QChip-BUfnKTgb.js";const V={class:"flex items-center justify-between q-pa-md bg-white"},F={class:"flex items-center gap-3"},J={class:"q-pa-md bg-white"},U={class:"mb-8"},Y={class:"text-gray-600 stitle"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},P={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},W={class:"flex items-center justify-between"},z={style:{"padding-left":"10px","padding-top":"5px"}},G={class:"text-3xl font-bold mt-2"},H={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},K={class:"flex items-center justify-between"},X={style:{"padding-left":"10px","padding-top":"5px"}},Z={class:"text-3xl font-bold mt-2"},tt={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},et={class:"flex items-center justify-between"},st={style:{"padding-left":"10px","padding-top":"5px"}},at={class:"text-3xl font-bold mt-2"},ot={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},lt={class:"flex items-center justify-between"},nt={style:{"padding-left":"10px","padding-top":"5px"}},rt={class:"text-3xl font-bold mt-2"},it={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},dt={class:"q-pa-md bg-white full-width"},ut={class:"text-lg text-primary text-bold"},ct={class:"q-gutter-y-md"},pt={class:"q-pa-md bg-white full-width"},mt={class:"q-gutter-y-md"},Ct=Object.assign({layout:j},{__name:"Dashboard",setup(bt){const D=["January","February","March","April","May","June","July","August","September","October","November","December"],m=d([]);function M(){const s=new Date,t=[];t.push({label:"All",value:"all"});for(let a=0;a<12;a++){const p=new Date(s.getFullYear(),s.getMonth()-a,1),_=p.getFullYear(),R=String(p.getMonth()+1).padStart(2,"0");t.push({label:`${D[p.getMonth()]} ${_}`,value:`${_}-${R}`})}m.value=t}const o=d(null),v=u(()=>{if(o.value==="all")return"All";if(!o.value)return"";const[s,t]=o.value.split("-");return new Date(Number(s),Number(t)-1,1).toLocaleString("en-US",{month:"long",year:"numeric"})}),g=u(()=>{var t;if(o.value==="all")return null;const s=((t=o.value)==null?void 0:t.split("-"))||[];return Number(s[1]||null)}),h=u(()=>{var t;if(o.value==="all")return null;const s=((t=o.value)==null?void 0:t.split("-"))||[];return Number(s[0]||null)}),r=d({cells:0,issues:0,receipts:0,correspondence:0}),c=d([]),i=d([]),k=u(()=>({labels:c.value.map(s=>s.name),datasets:[{label:"Issues",data:c.value.map(s=>s.issues),backgroundColor:"#3b82f6"},{label:"Receipts",data:c.value.map(s=>s.receipts),backgroundColor:"#ec4899"}]})),N=u(()=>({labels:i.value.map(s=>S(s.month)),datasets:[{label:"Issues",data:i.value.map(s=>s.issues),borderColor:"#3b82f6",backgroundColor:"#3b82f6",tension:.4},{label:"Receipts",data:i.value.map(s=>s.receipts),borderColor:"#ec4899",backgroundColor:"#ec4899",tension:.4},{label:"Total",data:i.value.map(s=>s.total),borderColor:"#10b981",backgroundColor:"#10b981",borderWidth:3,tension:.4}]})),S=s=>{const[t,a]=s.split("-");return new Date(Number(t),Number(a)-1).toLocaleString("en-US",{month:"short",year:"numeric"})},f={responsive:!0,maintainAspectRatio:!1};async function x(){try{const s=await b.get(route("statCards"),{params:{month:g.value,year:h.value}});r.value=s.data;const t=await b.get(route("barChart"),{params:{month:g.value,year:h.value}});c.value=t.data;const a=await b.get(route("timeline"));i.value=a.data}catch(s){console.error("Dashboard Load Error:",s)}}return q(o,x),L(async()=>{var s;M(),o.value=((s=m.value[0])==null?void 0:s.value)||null,x()}),(s,t)=>(T(),O(Q,{class:"container",padding:""},{default:w(()=>[e("div",V,[e("div",null,[t[3]||(t[3]=e("div",{class:"stitle"},"Dashboard",-1)),l($,{class:"text-dark"},{default:w(()=>[l(y,{class:"cursor-pointer",icon:"outbox",label:"Issue",onClick:t[0]||(t[0]=a=>s.$inertia.get(s.route("issues.index")))}),l(y,{class:"cursor-pointer",icon:"inbox",label:"Receipt",onClick:t[1]||(t[1]=a=>s.$inertia.get(s.route("receipts.index")))})]),_:1})]),e("div",F,[l(B,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a),options:m.value,label:"Select Month",outlined:"",dense:"",style:{width:"180px"},"emit-value":"","map-options":""},null,8,["modelValue","options"])])]),t[11]||(t[11]=e("br",null,null,-1)),e("div",J,[e("div",U,[e("p",Y,"Overview - "+n(v.value),1)]),e("div",E,[e("div",P,[e("div",W,[e("div",z,[t[4]||(t[4]=e("p",{class:"text-gray-500 text-sm font-medium"},"Total Correspondance",-1)),e("p",G,n(r.value.correspondence),1)])])]),e("div",H,[e("div",K,[e("div",X,[t[5]||(t[5]=e("p",{class:"text-gray-500 text-sm font-medium"},"Total Issues",-1)),e("p",Z,n(r.value.issues),1)])])]),e("div",tt,[e("div",et,[e("div",st,[t[6]||(t[6]=e("p",{class:"text-gray-500 text-sm font-medium"},"Total Receipts",-1)),e("p",at,n(r.value.receipts),1)])])]),e("div",ot,[e("div",lt,[e("div",nt,[t[7]||(t[7]=e("p",{class:"text-gray-500 text-sm font-medium"},"Total Cell",-1)),e("p",rt,n(r.value.cells),1)])])])])]),t[12]||(t[12]=e("br",null,null,-1)),e("div",it,[e("div",dt,[e("div",ut,"Issues & Receipts by Cell - "+n(v.value),1),t[8]||(t[8]=e("br",null,null,-1)),e("div",ct,[l(C(A),{"chart-data":k.value,"chart-options":f},null,8,["chart-data"])])]),e("div",pt,[t[9]||(t[9]=e("div",{class:"text-lg text-primary text-bold"},"Correspondence Timeline",-1)),t[10]||(t[10]=e("br",null,null,-1)),e("div",mt,[l(C(I),{"chart-data":N.value,"chart-options":f},null,8,["chart-data"])])])])]),_:1,__:[11,12]}))}});export{Ct as default};
