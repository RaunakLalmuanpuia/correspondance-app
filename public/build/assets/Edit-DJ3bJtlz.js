import{h as O,x as P,r as G,a as H,b as J,d as T,e as i,f as d,Q as m,u as o,i as R}from"./app-WZ1ru_N_.js";import{Q as K}from"./QSelect-CkXOu_Fc.js";import{Q as W}from"./QForm-DP5BZNoZ.js";import{Q as X}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-lV-oJIst.js";import{_ as Z}from"./BackendLayout-Bsy9mSmF.js";import"./QField-5LHUvhbi.js";import"./QChip-zJbo8JyV.js";const ee={class:"col-xs-12"},re={class:"col-xs-12 col-sm-6"},te={class:"col-xs-12 col-sm-6"},oe={class:"col-xs-12"},le={class:"col-xs-12"},se={class:"col-xs-12"},ae={class:"col-xs-12"},ie={class:"flex q-gutter-sm"},_e=Object.assign({layout:Z},{__name:"Edit",props:["designated_cells","data"],setup(f){var _,b,p,v,V,x,y,w,D;const l=f,c=O({submitting:!1}),r=P({subject:((_=l.data)==null?void 0:_.subject)||"",letter_no:((b=l.data)==null?void 0:b.letter_no)||"",letter_date:((p=l.data)==null?void 0:p.letter_date)||"",received_from:((v=l.data)==null?void 0:v.received_from)||"",cell:{value:(V=l==null?void 0:l.data)==null?void 0:V.cell_id,label:(y=(x=l==null?void 0:l.data)==null?void 0:x.cell)==null?void 0:y.name},name_of_da:((w=l.data)==null?void 0:w.name_of_da)||""}),g=G(z((D=l.data)==null?void 0:D.letter_date));function z(s){if(!s)return"";const[e,a,n]=s.split("-");return`${n}/${a}/${e}`}function E(s){if(!s)return null;const[e,a,n]=s.split("/");return`${n}-${a}-${e}`}function A(s){if(!s)return!1;const[e,a,n]=s.split("/"),u=new Date(`${n}-${a}-${e}`);return!isNaN(u.getTime())&&u.getDate()==e&&u.getMonth()+1==a&&u.getFullYear()==n}const I=s=>{r.letter_date=E(g.value),r.transform(e=>{var a;return{cell_id:(a=e==null?void 0:e.cell)==null?void 0:a.value,...e}}).put(route("receipts.update",l.data.id),{preserveState:!0,onStart:e=>c.submitting=!0,onFinish:e=>c.submitting=!1})};return(s,e)=>(J(),H(X,{class:"container",padding:""},{default:T(()=>[e[7]||(e[7]=i("div",{class:"flex justify-between items-center"},[i("div",null,[i("div",{class:"stitle"},"Edit Receipt")])],-1)),e[8]||(e[8]=i("br",null,null,-1)),d(W,{class:"row q-col-gutter-sm",style:{"max-width":"720px"},onSubmit:I},{default:T(()=>{var a,n,u,S,$,j,Q,N,q,U,Y,k,F,h,B,C,L,M;return[i("div",ee,[d(m,{modelValue:o(r).subject,"onUpdate:modelValue":e[0]||(e[0]=t=>o(r).subject=t),error:!!((a=o(r).errors)!=null&&a.subject),"error-message":(u=(n=o(r).errors)==null?void 0:n.subject)==null?void 0:u.toString(),rules:[t=>!!t||"Subject is required"],"bg-color":"white",label:"Subject","no-error-icon":"",outlined:"",autogrow:"",type:"textarea"},null,8,["modelValue","error","error-message","rules"])]),i("div",re,[d(m,{modelValue:o(r).letter_no,"onUpdate:modelValue":e[1]||(e[1]=t=>o(r).letter_no=t),error:!!((S=o(r).errors)!=null&&S.letter_no),"error-message":(j=($=o(r).errors)==null?void 0:$.letter_no)==null?void 0:j.toString(),rules:[t=>!!t||"Letter No. is required"],"bg-color":"white",label:"Letter No.","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),i("div",te,[d(m,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),label:"Letter Date (DD/MM/YYYY)",outlined:"","bg-color":"white",mask:"##/##/####","fill-mask":"",placeholder:"dd/mm/yyyy",error:!!((Q=o(r).errors)!=null&&Q.letter_date),"error-message":(q=(N=o(r).errors)==null?void 0:N.letter_date)==null?void 0:q.toString(),"no-error-icon":"",rules:[t=>!!t||"Letter Date is required",t=>A(t)||"The letter date field must be a valid date."]},null,8,["modelValue","error","error-message","rules"])]),i("div",oe,[d(m,{modelValue:o(r).received_from,"onUpdate:modelValue":e[3]||(e[3]=t=>o(r).received_from=t),error:!!((U=o(r).errors)!=null&&U.received_from),"error-message":(k=(Y=o(r).errors)==null?void 0:Y.received_from)==null?void 0:k.toString(),rules:[t=>!!t||"Received From is required"],autogrow:"",type:"textarea","bg-color":"white",label:"Received From","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),i("div",le,[d(K,{modelValue:o(r).cell,"onUpdate:modelValue":e[4]||(e[4]=t=>o(r).cell=t),error:!!((F=o(r).errors)!=null&&F.cell_id),"error-message":(B=(h=o(r).errors)==null?void 0:h.cell_id)==null?void 0:B.toString(),options:f.designated_cells,"bg-color":"white",label:"Designated Cell","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options"])]),i("div",se,[d(m,{modelValue:o(r).name_of_da,"onUpdate:modelValue":e[5]||(e[5]=t=>o(r).name_of_da=t),error:!!((C=o(r).errors)!=null&&C.name_of_da),"error-message":(M=(L=o(r).errors)==null?void 0:L.name_of_da)==null?void 0:M.toString(),"bg-color":"white",label:"Name of D.A","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message"])]),i("div",ae,[i("div",ie,[d(R,{loading:c.submitting,class:"sized-btn",color:"primary",label:"Save",type:"submit"},null,8,["loading"]),d(R,{class:"sized-btn",color:"negative",label:"Cancel",outline:"",onClick:e[6]||(e[6]=t=>s.$inertia.get(s.route("receipts.index")))})])])]}),_:1})]),_:1,__:[7,8]}))}});export{_e as default};
