import{Q as $,a as y}from"./QBreadcrumbs-DhywZ4Iu.js";import{Q as B}from"./QSelect-BVg4QbIy.js";import{Q}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-C14uitbV.js";import{_ as j}from"./BackendLayout-Cgh1lmg7.js";import{r as d,c as u,w as q,o as L,a as O,b as T,d as w,e as t,f as l,t as n,u as C,g as b}from"./app-BI0anLtl.js";import{B as I,L as V}from"./index-DZbcWJV3.js";import"./QChip-DnoQOFPU.js";const A={class:"flex items-center justify-between q-pa-md bg-white"},F={class:"flex items-center gap-3"},J={class:"q-pa-md bg-white"},U={class:"mb-8"},Y={class:"text-gray-600 stitle"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},P={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},W={class:"flex items-center justify-between"},z={style:{"padding-left":"10px","padding-top":"5px"}},G={class:"text-3xl font-bold mt-2"},H={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},K={class:"flex items-center justify-between"},X={style:{"padding-left":"10px","padding-top":"5px"}},Z={class:"text-3xl font-bold mt-2"},tt={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},et={class:"flex items-center justify-between"},st={style:{"padding-left":"10px","padding-top":"5px"}},ot={class:"text-3xl font-bold mt-2"},at={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},lt={class:"flex items-center justify-between"},nt={style:{"padding-left":"10px","padding-top":"5px"}},rt={class:"text-3xl font-bold mt-2"},it={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},dt={class:"q-pa-md bg-white full-width"},ut={class:"text-lg text-primary text-bold"},ct={class:"q-gutter-y-md"},pt={class:"q-pa-md bg-white full-width"},mt={class:"q-gutter-y-md"},wt=Object.assign({layout:j},{__name:"Dashboard",setup(bt){const D=["January","February","March","April","May","June","July","August","September","October","November","December"],m=d([]);function M(){const e=new Date,s=[];for(let o=0;o<12;o++){const p=new Date(e.getFullYear(),e.getMonth()-o,1),_=p.getFullYear(),R=String(p.getMonth()+1).padStart(2,"0");s.push({label:`${D[p.getMonth()]} ${_}`,value:`${_}-${R}`})}m.value=s}const a=d(null),g=u(()=>{if(!a.value)return"";const[e,s]=a.value.split("-");return new Date(Number(e),Number(s)-1,1).toLocaleString("en-US",{month:"long",year:"numeric"})}),v=u(()=>{const e=(a.value||"").split("-");return Number(e[1]||0)}),h=u(()=>{const e=(a.value||"").split("-");return Number(e[0]||0)}),r=d({cells:0,issues:0,receipts:0,correspondence:0}),c=d([]),i=d([]),k=u(()=>({labels:c.value.map(e=>e.name),datasets:[{label:"Issues",data:c.value.map(e=>e.issues),backgroundColor:"#3b82f6"},{label:"Receipts",data:c.value.map(e=>e.receipts),backgroundColor:"#ec4899"}]})),N=u(()=>({labels:i.value.map(e=>S(e.month)),datasets:[{label:"Issues",data:i.value.map(e=>e.issues),borderColor:"#3b82f6",backgroundColor:"#3b82f6",tension:.4},{label:"Receipts",data:i.value.map(e=>e.receipts),borderColor:"#ec4899",backgroundColor:"#ec4899",tension:.4},{label:"Total",data:i.value.map(e=>e.total),borderColor:"#10b981",backgroundColor:"#10b981",borderWidth:3,tension:.4}]})),S=e=>{const[s,o]=e.split("-");return new Date(Number(s),Number(o)-1).toLocaleString("en-US",{month:"short",year:"numeric"})},f={responsive:!0,maintainAspectRatio:!1};async function x(){try{const e=await b.get(route("statCards"),{params:{month:v.value,year:h.value}});r.value=e.data;const s=await b.get(route("barChart"),{params:{month:v.value,year:h.value}});c.value=s.data;const o=await b.get(route("timeline"));i.value=o.data}catch(e){console.error("Dashboard Load Error:",e)}}return q(a,x),L(async()=>{var e;M(),a.value=((e=m.value[0])==null?void 0:e.value)||null,x()}),(e,s)=>(T(),O(Q,{class:"container",padding:""},{default:w(()=>[t("div",A,[t("div",null,[s[3]||(s[3]=t("div",{class:"stitle"},"Dashboard",-1)),l($,{class:"text-dark"},{default:w(()=>[l(y,{class:"cursor-pointer",icon:"outbox",label:"Issue",onClick:s[0]||(s[0]=o=>e.$inertia.get(e.route("issues.index")))}),l(y,{class:"cursor-pointer",icon:"inbox",label:"Receipt",onClick:s[1]||(s[1]=o=>e.$inertia.get(e.route("receipts.index")))})]),_:1})]),t("div",F,[l(B,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=o=>a.value=o),options:m.value,label:"Select Month",outlined:"",dense:"",style:{width:"180px"},"emit-value":"","map-options":""},null,8,["modelValue","options"])])]),s[11]||(s[11]=t("br",null,null,-1)),t("div",J,[t("div",U,[t("p",Y,"Overview - "+n(g.value),1)]),t("div",E,[t("div",P,[t("div",W,[t("div",z,[s[4]||(s[4]=t("p",{class:"text-gray-500 text-sm font-medium"},"Total Correspondance",-1)),t("p",G,n(r.value.correspondence),1)])])]),t("div",H,[t("div",K,[t("div",X,[s[5]||(s[5]=t("p",{class:"text-gray-500 text-sm font-medium"},"Total Issues",-1)),t("p",Z,n(r.value.issues),1)])])]),t("div",tt,[t("div",et,[t("div",st,[s[6]||(s[6]=t("p",{class:"text-gray-500 text-sm font-medium"},"Total Receipts",-1)),t("p",ot,n(r.value.receipts),1)])])]),t("div",at,[t("div",lt,[t("div",nt,[s[7]||(s[7]=t("p",{class:"text-gray-500 text-sm font-medium"},"Total Cell",-1)),t("p",rt,n(r.value.cells),1)])])])])]),s[12]||(s[12]=t("br",null,null,-1)),t("div",it,[t("div",dt,[t("div",ut,"Issues & Receipts by Cell - "+n(g.value),1),s[8]||(s[8]=t("br",null,null,-1)),t("div",ct,[l(C(I),{"chart-data":k.value,"chart-options":f},null,8,["chart-data"])])]),t("div",pt,[s[9]||(s[9]=t("div",{class:"text-lg text-primary text-bold"},"Correspondence Timeline",-1)),s[10]||(s[10]=t("br",null,null,-1)),t("div",mt,[l(C(V),{"chart-data":N.value,"chart-options":f},null,8,["chart-data"])])])])]),_:1,__:[11,12]}))}});export{wt as default};
