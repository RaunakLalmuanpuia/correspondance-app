import{Q as O,a as C}from"./QBreadcrumbs-BIi_SV24.js";import{r as f,c as k,o as L,w as U,a as E,b as J,d as l,e as i,f as o,t as m,i as M,m as p,Q as T,n as W,W as z}from"./app-CRJX6UDd.js";import{Q as G}from"./QSelect-C7FUmAOw.js";import{Q as H,a as u}from"./QTable-D6tGL6Fl.js";import{Q as K}from"./QChip-Bj8Wmvh7.js";import{a as X,b as Q,c as N,Q as Z}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-BxYdD_77.js";import{_ as ee}from"./BackendLayout-tTR0ASVY.js";import{u as te}from"./use-quasar-Cq7K7Aji.js";import{d as ae}from"./date-DSqmd3ch.js";/* empty css            */const le={class:"flex items-center justify-between q-pa-md bg-white"},oe={class:"stitle"},ne={class:"flex q-gutter-sm"},re={class:"break-words whitespace-normal"},se={class:"whitespace-pre break-words"},he=Object.assign({layout:ee},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(ie){const V=[{name:"s_no",align:"left",label:"S. No",field:"s_no",sortable:!1},{name:"subject",align:"left",label:"Subject",field:"subject",sortable:!1},{name:"letter_no",align:"left",label:"Letter No",field:"letter_no",sortable:!1},{name:"letter_date",align:"left",label:"Letter Date",field:"letter_date",sortable:!0},{name:"received_from",align:"left",label:"Received From",field:"received_from",sortable:!0},{name:"designated_cell",align:"left",label:"Designated Cell",field:"designated_cell",sortable:!0},{name:"name_of_da",align:"left",label:"Name of Da",field:"name_of_da",sortable:!0},{name:"created_at",align:"left",label:"Issue Date",field:"created_at",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!0}],g=te(),$=f([]),b=f(""),y=f(!1),r=f({sortBy:"desc",descending:!1,page:1,rowsPerPage:50,rowsNumber:0}),P=t=>{g.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{z.delete(route("receipts.destroy",t.id),{onStart:e=>g.loading.show(),onFinish:e=>g.loading.hide(),preserveState:!1})})},j=t=>{t&&n.value!=="all"&&(n.value="all"),v({pagination:r.value,filter:t})};function v(t){const{page:e,rowsPerPage:a,sortBy:s,descending:d}=t.pagination,D=t.filter;y.value=!0,axios.get(route("receipts.json-index"),{params:{filter:D,page:e,rowsPerPage:a,month:Y.value,year:q.value}}).then(c=>{console.log(c.data);const{list:_}=c.data,{data:w,per_page:x,current_page:A,total:F,to:ue,from:de}=_;$.value=w,r.value.page=A,r.value.rowsNumber=F,r.value.rowsPerPage=x}).catch(c=>{var _,w;g.notify({type:"negative",message:(w=(_=c==null?void 0:c.response)==null?void 0:_.data)==null?void 0:w.message})}).finally(()=>y.value=!1)}const S=(t,e)=>{try{return t?ae.formatDate(new Date(t),"DD-MM-YYYY"):"N/A"}catch{return"Invalid Date"}},B=["January","February","March","April","May","June","July","August","September","October","November","December"],h=f([]);function I(){const t=new Date,e=[];e.push({label:"All",value:"all"});for(let a=0;a<12;a++){const s=new Date(t.getFullYear(),t.getMonth()-a,1),d=s.getFullYear(),D=String(s.getMonth()+1).padStart(2,"0");e.push({label:`${B[s.getMonth()]} ${d}`,value:`${d}-${D}`})}h.value=e}const n=f(null),R=k(()=>{if(n.value==="all")return"All";if(!n.value)return"";const[t,e]=n.value.split("-");return new Date(Number(t),Number(e)-1,1).toLocaleString("en-US",{month:"long",year:"numeric"})}),Y=k(()=>{var e;if(n.value==="all")return null;const t=((e=n.value)==null?void 0:e.split("-"))||[];return Number(t[1]||null)}),q=k(()=>{var e;if(n.value==="all")return null;const t=((e=n.value)==null?void 0:e.split("-"))||[];return Number(t[0]||null)});return L(()=>{var t;I(),n.value=((t=h.value[1])==null?void 0:t.value)||null,v({pagination:r.value,filter:b.value})}),U(n,()=>{v({pagination:r.value,filter:b.value})}),(t,e)=>(J(),E(Z,{class:"container",padding:""},{default:l(()=>[i("div",le,[i("div",null,[i("div",oe,"Receipts - "+m(R.value),1),o(O,{class:"text-dark"},{default:l(()=>[o(C,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:e[0]||(e[0]=a=>t.$inertia.get(t.route("dashboard")))}),o(C,{class:"cursor-pointer",label:"Receipt",onClick:e[1]||(e[1]=a=>t.$inertia.get(t.route("receipts.index")))})]),_:1})]),i("div",ne,[o(M,{onClick:e[2]||(e[2]=a=>t.$inertia.get(t.route("receipts.create"))),color:"btn-primary",label:"New Receipt"})])]),e[9]||(e[9]=i("br",null,null,-1)),o(H,{flat:"",ref:"tableRef",rows:$.value,columns:V,"row-key":"id",pagination:r.value,"onUpdate:pagination":e[5]||(e[5]=a=>r.value=a),loading:y.value,filter:b.value,"binary-state-sort":"","rows-per-page-options":[5,10,15,30,50],onRequest:v},{"top-left":l(()=>[o(G,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),options:h.value,label:"Select Month",outlined:"",dense:"",style:{width:"180px"},"emit-value":"","map-options":""},null,8,["modelValue","options"])]),"top-right":l(()=>[o(T,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[j,e[4]||(e[4]=a=>b.value=a)],"bg-color":"grey-2",outlined:"",modelValue:b.value,placeholder:"Search"},{append:l(()=>[o(W,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-s_no":l(a=>[o(u,null,{default:l(()=>[p(m((r.value.page-1)*r.value.rowsPerPage+(a.pageIndex+1)),1)]),_:2},1024)]),"body-cell-subject":l(a=>[o(u,{style:{"min-width":"300px","max-width":"400px"}},{default:l(()=>[i("div",re,m(a.row.subject),1)]),_:2},1024)]),"body-cell-letter_date":l(a=>[o(u,null,{default:l(()=>[p(m(S(a.row.letter_date)),1)]),_:2},1024)]),"body-cell-received_from":l(a=>[o(u,null,{default:l(()=>[i("div",se,m(a.row.received_from),1)]),_:2},1024)]),"body-cell-designated_cell":l(a=>[o(u,null,{default:l(()=>{var s,d;return[o(K,{label:(d=(s=a.row)==null?void 0:s.cell)==null?void 0:d.name,square:""},null,8,["label"])]}),_:2},1024)]),"body-cell-created_at":l(a=>[o(u,null,{default:l(()=>[p(m(S(a.row.created_at)),1)]),_:2},1024)]),"body-cell-action":l(a=>[o(u,null,{default:l(()=>[o(M,{round:"",icon:"more_vert"},{default:l(()=>[o(X,null,{default:l(()=>[o(Q,{clickable:"",onClick:s=>t.$inertia.get(t.route("receipts.show",a.row.id))},{default:l(()=>[o(N,null,{default:l(()=>e[6]||(e[6]=[p("View Detail")])),_:1,__:[6]})]),_:2},1032,["onClick"]),o(Q,{clickable:"",onClick:s=>t.$inertia.get(t.route("receipts.edit",a.row.id))},{default:l(()=>[o(N,null,{default:l(()=>e[7]||(e[7]=[p("Edit")])),_:1,__:[7]})]),_:2},1032,["onClick"]),o(Q,{clickable:"",onClick:s=>P(a.row)},{default:l(()=>[o(N,null,{default:l(()=>e[8]||(e[8]=[p("Delete")])),_:1,__:[8]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[9]}))}});export{he as default};
