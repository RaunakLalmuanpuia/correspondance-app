import{h as k,x as q,r as h,a as A,b as B,d as L,e as o,f as a,Q as u,u as s,i as C}from"./app-WZ1ru_N_.js";import{Q as F}from"./QSelect-CkXOu_Fc.js";import{Q as T}from"./QForm-DP5BZNoZ.js";import{Q as z}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-lV-oJIst.js";import{_ as I}from"./BackendLayout-Bsy9mSmF.js";import"./QField-5LHUvhbi.js";import"./QChip-zJbo8JyV.js";const O={class:"col-xs-12 col-sm-6"},P={class:"col-xs-12 col-sm-6"},E={class:"col-xs-12"},G={class:"col-xs-12 col-sm-6"},H={class:"col-xs-12 col-sm-6"},J={class:"col-xs-12"},K={class:"col-xs-12"},R={class:"flex q-gutter-sm"},oe=Object.assign({layout:I},{__name:"Create",props:["designated_cells"],setup(N){const c=k({submitting:!1}),r=q({letter_addressee_main:"",letter_addressee_copy_to:"",subject:"",letter_no:"",letter_date:"",cell:null}),m=h("");function M(i){if(!i)return!1;const[e,l,d]=i.split("/"),n=new Date(`${d}-${l}-${e}`);return!isNaN(n.getTime())&&n.getDate()==e&&n.getMonth()+1==l&&n.getFullYear()==d}function U(){if(!m.value)return null;const[i,e,l]=m.value.split("/");return`${l}-${e}-${i}`}const Y=i=>{r.letter_date=U(),r.transform(e=>{var l;return{cell_id:(l=e==null?void 0:e.cell)==null?void 0:l.value,...e}}).post(route("issues.store"),{preserveState:!0,onStart:e=>c.submitting=!0,onFinish:e=>c.submitting=!1})};return(i,e)=>(B(),A(z,{class:"container",padding:""},{default:L(()=>[e[7]||(e[7]=o("div",{class:"flex justify-between items-center"},[o("div",null,[o("div",{class:"stitle"},"New Issue")])],-1)),e[8]||(e[8]=o("br",null,null,-1)),a(T,{class:"row q-col-gutter-sm",style:{"max-width":"720px"},onSubmit:Y},{default:L(()=>{var l,d,n,_,g,p,b,f,y,v,V,x,w,S,D,j,Q,$;return[o("div",O,[a(u,{modelValue:s(r).letter_addressee_main,"onUpdate:modelValue":e[0]||(e[0]=t=>s(r).letter_addressee_main=t),error:!!((l=s(r).errors)!=null&&l.letter_addressee_main),"error-message":(n=(d=s(r).errors)==null?void 0:d.letter_addressee_main)==null?void 0:n.toString(),rules:[t=>!!t||"Letter Addressee(Main)"],autogrow:"",type:"textarea","bg-color":"white",label:"Letter Addressee(Main)","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),o("div",P,[a(u,{modelValue:s(r).letter_addressee_copy_to,"onUpdate:modelValue":e[1]||(e[1]=t=>s(r).letter_addressee_copy_to=t),error:!!((_=s(r).errors)!=null&&_.letter_addressee_copy_to),"error-message":(p=(g=s(r).errors)==null?void 0:g.letter_addressee_copy_to)==null?void 0:p.toString(),rules:[t=>!!t||"Letter Addressee (Copy-to)"],autogrow:"",type:"textarea","bg-color":"white",label:"Letter Addressee (Copy-to)","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),o("div",E,[a(u,{modelValue:s(r).subject,"onUpdate:modelValue":e[2]||(e[2]=t=>s(r).subject=t),error:!!((b=s(r).errors)!=null&&b.subject),"error-message":(y=(f=s(r).errors)==null?void 0:f.subject)==null?void 0:y.toString(),rules:[t=>!!t||"Subject is required"],autogrow:"",type:"textarea","bg-color":"white",label:"Subject","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),o("div",G,[a(u,{modelValue:s(r).letter_no,"onUpdate:modelValue":e[3]||(e[3]=t=>s(r).letter_no=t),error:!!((v=s(r).errors)!=null&&v.letter_no),"error-message":(x=(V=s(r).errors)==null?void 0:V.letter_no)==null?void 0:x.toString(),rules:[t=>!!t||"Letter No is required"],"bg-color":"white",label:"Letter No","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),o("div",H,[a(u,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),label:"Letter Date (DD/MM/YYYY)",outlined:"","bg-color":"white",mask:"##/##/####","fill-mask":"",placeholder:"dd/mm/yyyy",error:!!((w=s(r).errors)!=null&&w.letter_date),"error-message":(D=(S=s(r).errors)==null?void 0:S.letter_date)==null?void 0:D.toString(),"no-error-icon":"",rules:[t=>!!t||"Letter Date is required",t=>M(t)||"The letter date field must be a valid date."]},null,8,["modelValue","error","error-message","rules"])]),o("div",J,[a(F,{modelValue:s(r).cell,"onUpdate:modelValue":e[5]||(e[5]=t=>s(r).cell=t),error:!!((j=s(r).errors)!=null&&j.cell_id),"error-message":($=(Q=s(r).errors)==null?void 0:Q.cell_id)==null?void 0:$.toString(),options:N.designated_cells,"bg-color":"white",label:"Designated Cell","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options"])]),o("div",K,[o("div",R,[a(C,{loading:c.submitting,class:"sized-btn",color:"primary",label:"Save",type:"submit"},null,8,["loading"]),a(C,{class:"sized-btn",color:"negative",label:"Cancel",outline:"",onClick:e[6]||(e[6]=t=>i.$inertia.get(i.route("issues.index")))})])])]}),_:1})]),_:1,__:[7,8]}))}});export{oe as default};
