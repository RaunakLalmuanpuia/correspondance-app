import{h as P,x as G,r as H,a as J,b as K,d as A,e as n,f as i,Q as m,u as r,i as F}from"./app-WZ1ru_N_.js";import{Q as R}from"./QSelect-CkXOu_Fc.js";import{Q as W}from"./QForm-DP5BZNoZ.js";import{Q as X}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-lV-oJIst.js";import{_ as Z}from"./BackendLayout-Bsy9mSmF.js";import{u as ee}from"./use-quasar-BfJHp3FQ.js";import"./QField-5LHUvhbi.js";import"./QChip-zJbo8JyV.js";const te={class:"col-xs-12 col-sm-6"},re={class:"col-xs-12 col-sm-6"},oe={class:"col-xs-12"},le={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12 col-sm-6"},ae={class:"col-xs-12"},ne={class:"col-xs-12"},de={class:"flex q-gutter-sm"},fe=Object.assign({layout:Z},{__name:"Edit",props:["designated_cells","data"],setup(g){var p,b,f,y,v,V,x,w,D;const l=g,c=P({submitting:!1});function z(s){if(!s)return"";const[e,a,d]=s.split("-");return`${d}/${a}/${e}`}function E(s){if(!s)return null;const[e,a,d]=s.split("/");return`${d}-${a}-${e}`}function I(s){if(!s)return!1;const[e,a,d]=s.split("/"),u=new Date(`${d}-${a}-${e}`);return!isNaN(u.getTime())&&u.getDate()==e&&u.getMonth()+1==a&&u.getFullYear()==d}ee();const t=G({letter_addressee_main:((p=l.data)==null?void 0:p.letter_addressee_main)||"",letter_addressee_copy_to:((b=l.data)==null?void 0:b.letter_addressee_copy_to)||"",subject:((f=l.data)==null?void 0:f.subject)||"",letter_no:((y=l.data)==null?void 0:y.letter_no)||"",letter_date:((v=l.data)==null?void 0:v.letter_date)||"",cell:{value:(V=l==null?void 0:l.data)==null?void 0:V.cell_id,label:(w=(x=l==null?void 0:l.data)==null?void 0:x.cell)==null?void 0:w.name}}),_=H(z((D=l.data)==null?void 0:D.letter_date)),O=s=>{t.letter_date=E(_.value),t.transform(e=>{var a;return{cell_id:(a=e==null?void 0:e.cell)==null?void 0:a.value,...e}}).put(route("issues.update",l.data.id),{preserveState:!0,onStart:e=>c.submitting=!0,onFinish:e=>c.submitting=!1})};return(s,e)=>(K(),J(X,{class:"container text-center",padding:""},{default:A(()=>[e[7]||(e[7]=n("div",{class:"flex justify-between items-center"},[n("div",null,[n("div",{class:"stitle"},"Edit Issue")])],-1)),e[8]||(e[8]=n("br",null,null,-1)),i(W,{class:"row q-col-gutter-sm",style:{"max-width":"720px"},onSubmit:O},{default:A(()=>{var a,d,u,$,S,Q,j,U,L,M,Y,k,C,N,h,B,T,q;return[n("div",te,[i(m,{modelValue:r(t).letter_addressee_main,"onUpdate:modelValue":e[0]||(e[0]=o=>r(t).letter_addressee_main=o),error:!!((a=r(t).errors)!=null&&a.letter_addressee_main),"error-message":(u=(d=r(t).errors)==null?void 0:d.letter_addressee_main)==null?void 0:u.toString(),rules:[o=>!!o||"Letter Addressee(Main)"],autogrow:"",type:"textarea","bg-color":"white",label:"Letter Addressee(Main)","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),n("div",re,[i(m,{modelValue:r(t).letter_addressee_copy_to,"onUpdate:modelValue":e[1]||(e[1]=o=>r(t).letter_addressee_copy_to=o),error:!!(($=r(t).errors)!=null&&$.letter_addressee_copy_to),"error-message":(Q=(S=r(t).errors)==null?void 0:S.letter_addressee_copy_to)==null?void 0:Q.toString(),autogrow:"",type:"textarea","bg-color":"white",label:"Letter Addressee (Copy-to)","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message"])]),n("div",oe,[i(m,{modelValue:r(t).subject,"onUpdate:modelValue":e[2]||(e[2]=o=>r(t).subject=o),error:!!((j=r(t).errors)!=null&&j.subject),"error-message":(L=(U=r(t).errors)==null?void 0:U.subject)==null?void 0:L.toString(),"bg-color":"white",label:"Subject","no-error-icon":"",outlined:"",autogrow:"",type:"textarea"},null,8,["modelValue","error","error-message"])]),n("div",le,[i(m,{modelValue:r(t).letter_no,"onUpdate:modelValue":e[3]||(e[3]=o=>r(t).letter_no=o),error:!!((M=r(t).errors)!=null&&M.letter_no),"error-message":(k=(Y=r(t).errors)==null?void 0:Y.letter_no)==null?void 0:k.toString(),"bg-color":"white",label:"Letter No","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message"])]),n("div",se,[i(m,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=o=>_.value=o),label:"Letter Date (DD/MM/YYYY)",outlined:"","bg-color":"white",mask:"##/##/####","fill-mask":"",placeholder:"dd/mm/yyyy",error:!!((C=r(t).errors)!=null&&C.letter_date),"error-message":(h=(N=r(t).errors)==null?void 0:N.letter_date)==null?void 0:h.toString(),"no-error-icon":"",rules:[o=>!!o||"Letter Date is required",o=>I(o)||"The letter date field must be a valid date."]},null,8,["modelValue","error","error-message","rules"])]),n("div",ae,[i(R,{modelValue:r(t).cell,"onUpdate:modelValue":e[5]||(e[5]=o=>r(t).cell=o),error:!!((B=r(t).errors)!=null&&B.cell_id),"error-message":(q=(T=r(t).errors)==null?void 0:T.cell_id)==null?void 0:q.toString(),options:g.designated_cells,"bg-color":"white",label:"Designated Cell","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options"])]),n("div",ne,[n("div",de,[i(F,{loading:c.submitting,class:"sized-btn",color:"primary",label:"Update",type:"submit"},null,8,["loading"]),i(F,{class:"sized-btn",color:"negative",label:"Cancel",outline:"",onClick:e[6]||(e[6]=o=>s.$inertia.replace(s.route("office.index")))})])])]}),_:1})]),_:1,__:[7,8]}))}});export{fe as default};
