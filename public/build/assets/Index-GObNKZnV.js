import{Q as I,a as C}from"./QBreadcrumbs-D3oxabkP.js";import{r as g,o as S,a as $,b,d as t,e as i,f as l,j as _,p as v,X as j,Y as R,Z as A,Q as T,i as h,W as F}from"./app-DC8lp303.js";import{Q as L}from"./QChip-Bg8TkQi2.js";import{Q as M,a as B}from"./QTable-CU8FF7VS.js";import{a as O,b as w,c as k,Q as W}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-DtCeipVe.js";import{_ as Y}from"./BackendLayout-CB6PiZaO.js";import{u as x}from"./use-quasar-B7PiYgOM.js";/* empty css            */import"./QSelect-CzZ9KgUb.js";import"./QField-Chu_ah_d.js";const X={class:"flex items-center justify-between q-pa-md bg-white"},Z={class:"flex q-gutter-sm"},ie=Object.assign({layout:Y},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(z){const N=[{name:"name",align:"left",label:"Name",field:"name",sortable:!1},{name:"designation",align:"left",label:"Designation",field:"designation",sortable:!1},{name:"email",align:"left",label:"Email",field:"email",sortable:!0},{name:"role",align:"left",label:"Role",field:"role",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!0}],u=x(),Q=g([]),d=g(""),p=g(!1),n=g({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),D=a=>{u.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{F.delete(route("user.destroy",a.id),{onStart:e=>u.loading.show(),onFinish:e=>u.loading.hide(),preserveState:!1})})},P=a=>{c({pagination:n.value,filter:a})};function c(a){const{page:e,rowsPerPage:o,sortBy:s,descending:y}=a.pagination,V=a.filter;p.value=!0,axios.get(route("user.json-index"),{params:{filter:V,page:e,rowsPerPage:o}}).then(r=>{console.log(r.data);const{list:f}=r.data,{data:m,per_page:q,current_page:U,total:E,to:G,from:H}=f;Q.value=m,n.value.page=U,n.value.rowsNumber=E,n.value.rowsPerPage=q}).catch(r=>{var f,m;u.notify({type:"negative",message:(m=(f=r==null?void 0:r.response)==null?void 0:f.data)==null?void 0:m.message})}).finally(()=>p.value=!1)}return S(()=>{c({pagination:n.value,filter:d.value})}),(a,e)=>(b(),$(W,{class:"container",padding:""},{default:t(()=>[i("div",X,[i("div",null,[e[5]||(e[5]=i("div",{class:"stitle"},"User Accounts",-1)),l(I,{class:"text-dark"},{default:t(()=>[l(C,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:e[0]||(e[0]=o=>a.$inertia.get(a.route("dashboard")))}),l(C,{class:"cursor-pointer",label:"User Accounts",onClick:e[1]||(e[1]=o=>a.$inertia.get(a.route("user.index")))})]),_:1})]),i("div",Z,[l(_,{onClick:e[2]||(e[2]=o=>a.$inertia.get(a.route("user.create"))),color:"btn-primary",label:"New User"})])]),e[9]||(e[9]=i("br",null,null,-1)),l(M,{flat:"",ref:"tableRef",title:"List of User",rows:Q.value,columns:N,"row-key":"id",pagination:n.value,"onUpdate:pagination":e[4]||(e[4]=o=>n.value=o),loading:p.value,filter:d.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:c},{"top-right":t(()=>[l(T,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[P,e[3]||(e[3]=o=>d.value=o)],"bg-color":"grey-2",outlined:"",modelValue:d.value,placeholder:"Search"},{append:t(()=>[l(h,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-role":t(o=>[l(B,null,{default:t(()=>{var s;return[(b(!0),j(R,null,A((s=o.row)==null?void 0:s.roles,y=>(b(),$(L,{label:y.name,square:""},null,8,["label"]))),256))]}),_:2},1024)]),"body-cell-action":t(o=>[l(B,null,{default:t(()=>[l(_,{round:"",icon:"more_vert"},{default:t(()=>[l(O,null,{default:t(()=>[l(w,{clickable:"",onClick:s=>a.$inertia.get(a.route("user.show",o.row.id))},{default:t(()=>[l(k,null,{default:t(()=>e[6]||(e[6]=[v("View Detail")])),_:1,__:[6]})]),_:2},1032,["onClick"]),l(w,{clickable:"",onClick:s=>a.$inertia.get(a.route("user.edit",o.row.id))},{default:t(()=>[l(k,null,{default:t(()=>e[7]||(e[7]=[v("Edit")])),_:1,__:[7]})]),_:2},1032,["onClick"]),l(w,{clickable:"",onClick:s=>D(o.row)},{default:t(()=>[l(k,null,{default:t(()=>e[8]||(e[8]=[v("Delete")])),_:1,__:[8]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[9]}))}});export{ie as default};
