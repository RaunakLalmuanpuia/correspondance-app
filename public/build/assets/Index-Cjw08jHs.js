import{Q as L,a as S}from"./QBreadcrumbs-DhywZ4Iu.js";import{r as m,c as D,o as U,w as E,a as J,b as R,d as l,e as i,f as o,t as u,i as M,m as p,Q as T,n as W,W as z}from"./app-BI0anLtl.js";import{Q as G}from"./QSelect-BVg4QbIy.js";import{Q as H,a as d}from"./QTable-BQo4mxcg.js";import{Q as K}from"./QChip-DnoQOFPU.js";import{a as X,b as Q,c as N,Q as Z}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-C14uitbV.js";import{_ as ee}from"./BackendLayout-Cgh1lmg7.js";import{d as te}from"./date-DAhlT2YQ.js";import{u as ae}from"./use-quasar-D1sxBCqc.js";const le={class:"flex items-center justify-between q-pa-md bg-white"},oe={class:"stitle"},se={class:"flex q-gutter-sm"},ne={class:"break-words whitespace-normal"},re={class:"whitespace-pre break-words"},ie={class:"whitespace-pre break-words"},he=Object.assign({layout:ee},{__name:"Index",props:["cell","canCreate","canEdit","canDelete"],setup(de){const I=[{name:"s_no",align:"left",label:"S. No",field:"s_no",sortable:!1},{name:"subject",align:"left",label:"Subject",field:"subject",sortable:!1},{name:"letter_no",align:"left",label:"Letter No",field:"letter_no",sortable:!1},{name:"letter_addressee_main",align:"left",label:"Address(Main)",field:"letter_addressee_main",sortable:!1},{name:"letter_addressee_copy_to",align:"left",label:"Address(Copy to)",field:"letter_addressee_copy_to",sortable:!1},{name:"letter_date",align:"left",label:"Letter Date",field:"letter_date",sortable:!0},{name:"designated_cell",align:"left",label:"Designated Cell",field:"designated_cell",sortable:!1},{name:"created_at",align:"left",label:"Issue Date",field:"created_at",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!1}],g=ae(),$=m([]),b=m(""),y=m(!1),s=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),V=t=>{g.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{z.delete(route("issues.destroy",t.id),{onStart:a=>g.loading.show(),onFinish:a=>g.loading.hide(),preserveState:!1})})},P=t=>{_({pagination:s.value,filter:t})};function _(t){const{page:a,rowsPerPage:e,sortBy:n,descending:c}=t.pagination,k=t.filter;y.value=!0,axios.get(route("issues.json-index"),{params:{filter:k,page:a,rowsPerPage:e,month:q.value,year:x.value}}).then(f=>{console.log(f.data);const{list:v}=f.data,{data:w,per_page:A,current_page:O,total:F,to:ue,from:ce}=v;$.value=w,s.value.page=O,s.value.rowsNumber=F,s.value.rowsPerPage=A}).catch(f=>{var v,w;g.notify({type:"negative",message:(w=(v=f==null?void 0:f.response)==null?void 0:v.data)==null?void 0:w.message})}).finally(()=>y.value=!1)}const C=(t,a)=>{try{return t?te.formatDate(new Date(t),"DD-MM-YYYY"):"N/A"}catch{return"Invalid Date"}},j=["January","February","March","April","May","June","July","August","September","October","November","December"],h=m([]);function B(){const t=new Date,a=[];for(let e=0;e<12;e++){const n=new Date(t.getFullYear(),t.getMonth()-e,1),c=n.getFullYear(),k=String(n.getMonth()+1).padStart(2,"0");a.push({label:`${j[n.getMonth()]} ${c}`,value:`${c}-${k}`})}h.value=a}const r=m(null),Y=D(()=>{if(!r.value)return"";const[t,a]=r.value.split("-");return new Date(Number(t),Number(a)-1,1).toLocaleString("en-US",{month:"long",year:"numeric"})}),q=D(()=>{const t=(r.value||"").split("-");return Number(t[1]||0)}),x=D(()=>{const t=(r.value||"").split("-");return Number(t[0]||0)});return U(()=>{var t;B(),r.value=((t=h.value[0])==null?void 0:t.value)||null,_({pagination:s.value,filter:b.value})}),E(r,()=>{_({pagination:s.value,filter:b.value})}),(t,a)=>(R(),J(Z,{class:"container",padding:""},{default:l(()=>[i("div",le,[i("div",null,[i("div",oe,"Issue - "+u(Y.value),1),o(L,{class:"text-dark"},{default:l(()=>[o(S,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:a[0]||(a[0]=e=>t.$inertia.get(t.route("dashboard")))}),o(S,{class:"cursor-pointer",label:"Issues",onClick:a[1]||(a[1]=e=>t.$inertia.get(t.route("issues.index")))})]),_:1})]),i("div",se,[o(M,{onClick:a[2]||(a[2]=e=>t.$inertia.get(t.route("issues.create"))),color:"btn-primary",label:"New Issue"})])]),a[9]||(a[9]=i("br",null,null,-1)),o(H,{flat:"",ref:"tableRef",rows:$.value,columns:I,"row-key":"id",pagination:s.value,"onUpdate:pagination":a[5]||(a[5]=e=>s.value=e),loading:y.value,filter:b.value,"binary-state-sort":"","rows-per-page-options":[5,10,15,30,50],onRequest:_},{"top-left":l(()=>[o(G,{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),options:h.value,label:"Select Month",outlined:"",dense:"",style:{width:"180px"},"emit-value":"","map-options":""},null,8,["modelValue","options"])]),"top-right":l(()=>[o(T,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[P,a[4]||(a[4]=e=>b.value=e)],"bg-color":"grey-2",outlined:"",modelValue:b.value,placeholder:"Search"},{append:l(()=>[o(W,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-s_no":l(e=>[o(d,null,{default:l(()=>[p(u((s.value.page-1)*s.value.rowsPerPage+(e.pageIndex+1)),1)]),_:2},1024)]),"body-cell-subject":l(e=>[o(d,{style:{"min-width":"200px","max-width":"300px"}},{default:l(()=>[i("div",ne,u(e.row.subject),1)]),_:2},1024)]),"body-cell-letter_date":l(e=>[o(d,null,{default:l(()=>[p(u(C(e.row.letter_date)),1)]),_:2},1024)]),"body-cell-letter_addressee_main":l(e=>[o(d,null,{default:l(()=>[i("div",re,u(e.row.letter_addressee_main),1)]),_:2},1024)]),"body-cell-letter_addressee_copy_to":l(e=>[o(d,null,{default:l(()=>[i("div",ie,u(e.row.letter_addressee_copy_to),1)]),_:2},1024)]),"body-cell-designated_cell":l(e=>[o(d,null,{default:l(()=>{var n,c;return[o(K,{label:(c=(n=e.row)==null?void 0:n.cell)==null?void 0:c.name,square:""},null,8,["label"])]}),_:2},1024)]),"body-cell-created_at":l(e=>[o(d,null,{default:l(()=>[p(u(C(e.row.created_at)),1)]),_:2},1024)]),"body-cell-action":l(e=>[o(d,null,{default:l(()=>[o(M,{round:"",icon:"more_vert"},{default:l(()=>[o(X,null,{default:l(()=>[o(Q,{clickable:"",onClick:n=>t.$inertia.get(t.route("issues.show",e.row.id))},{default:l(()=>[o(N,null,{default:l(()=>a[6]||(a[6]=[p("View Detail")])),_:1,__:[6]})]),_:2},1032,["onClick"]),o(Q,{clickable:"",onClick:n=>t.$inertia.get(t.route("issues.edit",e.row.id))},{default:l(()=>[o(N,null,{default:l(()=>a[7]||(a[7]=[p("Edit")])),_:1,__:[7]})]),_:2},1032,["onClick"]),o(Q,{clickable:"",onClick:n=>V(e.row)},{default:l(()=>[o(N,null,{default:l(()=>a[8]||(a[8]=[p("Delete")])),_:1,__:[8]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[9]}))}});export{he as default};
