import{Q as W,a as j}from"./QBreadcrumbs-C5rxKzEP.js";import{r as u,c as S,o as z,w as G,a as H,b as K,d as t,e as o,f as a,t as n,i as x,m as v,Q as X,n as Z,p as ee,j as le,k as A,W as te}from"./app-BvjAOQ5v.js";import{Q as ae}from"./QSelect-3GO_88rq.js";import{Q as se,a as _}from"./QTable-gtqXJSFC.js";import{Q as oe}from"./QChip-CIHaIH_t.js";import{a as ne,b as M,c as $,Q as ie}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-CQZdEsgp.js";import{Q as f}from"./QField-DiFoJK1L.js";import{_ as re}from"./BackendLayout-DbJK3pMT.js";import{d as de}from"./date-Dg0NIc10.js";import{u as ue}from"./use-quasar-e75QFen4.js";const ce={class:"flex items-center justify-between q-pa-md bg-white"},_e={class:"stitle"},fe={class:"flex q-gutter-sm"},be={class:"break-words whitespace-normal"},me={class:"whitespace-pre break-words"},pe={class:"whitespace-pre break-words"},ve={class:"stitle"},ge={class:"row q-col-gutter-sm",style:{"max-width":"720px"}},we={class:"col-xs-12"},he={class:"subtitle whitespace-pre-line"},ye={class:"col-xs-12 col-sm-6"},ke={class:"subtitle whitespace-pre-line"},De={class:"col-xs-12 col-sm-6"},Qe={class:"subtitle whitespace-pre-line"},Ce={class:"col-xs-12 col-sm-6"},Ne={class:"subtitle"},Se={class:"col-xs-12 col-sm-6"},xe={class:"subtitle"},Me={class:"col-xs-12 col-sm-6"},$e={class:"subtitle"},Ve={class:"col-xs-12 col-sm-6"},Ie={class:"subtitle"},Te=Object.assign({layout:re},{__name:"Index",props:["cell","canCreate","canEdit","canDelete"],setup(je){const B=[{name:"s_no",align:"left",label:"S. No",field:"s_no",sortable:!1},{name:"subject",align:"left",label:"Subject",field:"subject",sortable:!1},{name:"letter_no",align:"left",label:"Letter No",field:"letter_no",sortable:!1},{name:"letter_addressee_main",align:"left",label:"Address(Main)",field:"letter_addressee_main",sortable:!1},{name:"letter_addressee_copy_to",align:"left",label:"Address(Copy to)",field:"letter_addressee_copy_to",sortable:!1},{name:"letter_date",align:"left",label:"Letter Date",field:"letter_date",sortable:!0},{name:"designated_cell",align:"left",label:"Designated Cell",field:"designated_cell",sortable:!1},{name:"issue_date",align:"left",label:"Issue Date",field:"issue_date",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!1}],g=ue(),V=u([]),b=u(""),C=u(!1),c=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),w=u(!1),d=u({}),L=s=>{d.value=s,w.value=!0},q=s=>{g.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{te.delete(route("issues.destroy",s.id),{onStart:e=>g.loading.show(),onFinish:e=>g.loading.hide(),preserveState:!1})})},P=s=>{b.value=s,s&&i.value!=="all"&&(i.value="all"),s||(i.value=I.value),h({pagination:c.value,filter:s})};function h(s){const{page:e,rowsPerPage:l,sortBy:r,descending:m}=s.pagination,N=s.filter;C.value=!0,axios.get(route("issues.json-index"),{params:{filter:N,page:e,rowsPerPage:l,month:U.value,year:E.value}}).then(p=>{console.log(p.data);const{list:D}=p.data,{data:Q,per_page:J,current_page:R,total:T,to:Ae,from:Be}=D;V.value=Q,c.value.page=R,c.value.rowsNumber=T,c.value.rowsPerPage=J}).catch(p=>{var D,Q;g.notify({type:"negative",message:(Q=(D=p==null?void 0:p.response)==null?void 0:D.data)==null?void 0:Q.message})}).finally(()=>C.value=!1)}const y=(s,e)=>{try{return s?de.formatDate(new Date(s),"DD-MM-YYYY"):"N/A"}catch{return"Invalid Date"}},Y=["January","February","March","April","May","June","July","August","September","October","November","December"],k=u([]);function F(){const s=new Date,e=[];e.push({label:"All",value:"all"});for(let l=0;l<12;l++){const r=new Date(s.getFullYear(),s.getMonth()-l,1),m=r.getFullYear(),N=String(r.getMonth()+1).padStart(2,"0");e.push({label:`${Y[r.getMonth()]} ${m}`,value:`${m}-${N}`})}k.value=e}const i=u(null),O=S(()=>{if(i.value==="all")return"All";if(!i.value)return"";const[s,e]=i.value.split("-");return new Date(Number(s),Number(e)-1,1).toLocaleString("en-US",{month:"long",year:"numeric"})}),U=S(()=>{var e;if(i.value==="all")return null;const s=((e=i.value)==null?void 0:e.split("-"))||[];return Number(s[1]||null)}),E=S(()=>{var e;if(i.value==="all")return null;const s=((e=i.value)==null?void 0:e.split("-"))||[];return Number(s[0]||null)}),I=u(null);return z(()=>{var s,e;F(),I.value=((s=k.value[1])==null?void 0:s.value)||null,i.value=((e=k.value[1])==null?void 0:e.value)||null,h({pagination:c.value,filter:b.value})}),G(i,()=>{h({pagination:c.value,filter:b.value})}),(s,e)=>(K(),H(ie,{class:"container",padding:""},{default:t(()=>[o("div",ce,[o("div",null,[o("div",_e,"Issue - "+n(O.value),1),a(W,{class:"text-dark"},{default:t(()=>[a(j,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:e[0]||(e[0]=l=>s.$inertia.get(s.route("dashboard")))}),a(j,{class:"cursor-pointer",label:"Issues",onClick:e[1]||(e[1]=l=>s.$inertia.get(s.route("issues.index")))})]),_:1})]),o("div",fe,[a(x,{onClick:e[2]||(e[2]=l=>s.$inertia.get(s.route("issues.create"))),color:"btn-primary",label:"New Issue"})])]),e[11]||(e[11]=o("br",null,null,-1)),a(se,{flat:"",ref:"tableRef",rows:V.value,columns:B,"row-key":"id",pagination:c.value,"onUpdate:pagination":e[5]||(e[5]=l=>c.value=l),loading:C.value,filter:b.value,"binary-state-sort":"","rows-per-page-options":[5,10,15,30,50],onRequest:h},{"top-left":t(()=>[a(ae,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),options:k.value,label:"Select Month",outlined:"",dense:"",style:{width:"180px"},"emit-value":"","map-options":""},null,8,["modelValue","options"])]),"top-right":t(()=>[a(X,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[P,e[4]||(e[4]=l=>b.value=l)],"bg-color":"grey-2",outlined:"",modelValue:b.value,clearable:"",placeholder:"Search"},{append:t(()=>[a(Z,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-s_no":t(l=>[a(_,null,{default:t(()=>[v(n(l.row.s_no),1)]),_:2},1024)]),"body-cell-subject":t(l=>[a(_,{style:{"min-width":"200px","max-width":"300px"}},{default:t(()=>[o("div",be,n(l.row.subject),1)]),_:2},1024)]),"body-cell-letter_date":t(l=>[a(_,null,{default:t(()=>[v(n(y(l.row.letter_date)),1)]),_:2},1024)]),"body-cell-letter_addressee_main":t(l=>[a(_,null,{default:t(()=>[o("div",me,n(l.row.letter_addressee_main),1)]),_:2},1024)]),"body-cell-letter_addressee_copy_to":t(l=>[a(_,null,{default:t(()=>[o("div",pe,n(l.row.letter_addressee_copy_to),1)]),_:2},1024)]),"body-cell-designated_cell":t(l=>[a(_,null,{default:t(()=>{var r,m;return[a(oe,{label:(m=(r=l.row)==null?void 0:r.cell)==null?void 0:m.name,square:""},null,8,["label"])]}),_:2},1024)]),"body-cell-issue_date":t(l=>[a(_,null,{default:t(()=>[v(n(y(l.row.issue_date)),1)]),_:2},1024)]),"body-cell-action":t(l=>[a(_,null,{default:t(()=>[a(x,{round:"",icon:"more_vert"},{default:t(()=>[a(ne,null,{default:t(()=>[a(M,{clickable:"",onClick:r=>L(l.row)},{default:t(()=>[a($,null,{default:t(()=>e[8]||(e[8]=[v("View Detail")])),_:1,__:[8]})]),_:2},1032,["onClick"]),a(M,{clickable:"",onClick:r=>s.$inertia.get(s.route("issues.edit",l.row.id))},{default:t(()=>[a($,null,{default:t(()=>e[9]||(e[9]=[v("Edit")])),_:1,__:[9]})]),_:2},1032,["onClick"]),a(M,{clickable:"",onClick:r=>q(l.row)},{default:t(()=>[a($,null,{default:t(()=>e[10]||(e[10]=[v("Delete")])),_:1,__:[10]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"]),a(ee,{modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=l=>w.value=l),"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a(le,null,{default:t(()=>[a(A,{class:"row items-center justify-between"},{default:t(()=>[o("div",ve,"Issue - "+n(d.value.s_no),1),a(x,{dense:"",flat:"",icon:"close",onClick:e[6]||(e[6]=l=>w.value=!1)})]),_:1}),a(A,null,{default:t(()=>[o("div",ge,[o("div",we,[a(f,{label:"Subject",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[o("div",he,n(d.value.subject||"—"),1)]),_:1})]),o("div",ye,[a(f,{label:"Letter Addressee (Main)",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[o("div",ke,n(d.value.letter_addressee_main||"—"),1)]),_:1})]),o("div",De,[a(f,{label:"Letter Addressee (Copy-to)",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[o("div",Qe,n(d.value.letter_addressee_copy_to||"—"),1)]),_:1})]),o("div",Ce,[a(f,{label:"Letter No",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[o("div",Ne,n(d.value.letter_no||"—"),1)]),_:1})]),o("div",Se,[a(f,{label:"Letter Date",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[o("div",xe,n(y(d.value.letter_date)),1)]),_:1})]),o("div",Me,[a(f,{label:"Designated Cell",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>{var l,r;return[o("div",$e,n(((r=(l=d.value)==null?void 0:l.cell)==null?void 0:r.name)||"—"),1)]}),_:1})]),o("div",Ve,[a(f,{label:"Issue Date",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[o("div",Ie,n(y(d.value.issue_date)||"—"),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[11]}))}});export{Te as default};
