import{Q as W,a as R}from"./QBreadcrumbs-C5rxKzEP.js";import{r as u,c as S,o as z,w as G,a as H,b as K,d as t,e as s,f as a,t as i,i as x,m as p,Q as X,n as Z,p as ee,j as le,k as A,W as te}from"./app-BvjAOQ5v.js";import{Q as ae}from"./QSelect-3GO_88rq.js";import{Q as oe,a as f}from"./QTable-gtqXJSFC.js";import{Q as se}from"./QChip-CIHaIH_t.js";import{a as ne,b as $,c as M,Q as ie}from"./SFooter.vue_vue_type_style_index_0_scoped_db59b318_lang-CQZdEsgp.js";import{Q as m}from"./QField-DiFoJK1L.js";import{_ as re}from"./BackendLayout-DbJK3pMT.js";import{u as de}from"./use-quasar-e75QFen4.js";import{d as ue}from"./date-Dg0NIc10.js";const ce={class:"flex items-center justify-between q-pa-md bg-white"},fe={class:"stitle"},me={class:"flex q-gutter-sm"},be={class:"break-words whitespace-normal"},ve={class:"whitespace-pre break-words"},_e={class:"stitle"},pe={class:"row q-col-gutter-sm",style:{"max-width":"720px"}},ge={class:"col-xs-12"},we={class:"subtitle whitespace-pre-line"},he={class:"col-xs-12"},ye={class:"subtitle whitespace-pre-line"},ke={class:"col-xs-12 col-sm-6"},De={class:"subtitle"},Qe={class:"col-xs-12 col-sm-6"},Ne={class:"subtitle"},Ce={class:"col-xs-12 col-sm-6"},Se={class:"subtitle"},xe={class:"col-xs-12 col-sm-6"},$e={class:"subtitle"},Me={class:"col-xs-12 col-sm-6"},Ve={class:"subtitle"},Je=Object.assign({layout:re},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(je){const B=[{name:"s_no",align:"left",label:"S. No",field:"s_no",sortable:!1},{name:"subject",align:"left",label:"Subject",field:"subject",sortable:!1},{name:"letter_no",align:"left",label:"Letter No",field:"letter_no",sortable:!1},{name:"letter_date",align:"left",label:"Letter Date",field:"letter_date",sortable:!0},{name:"received_from",align:"left",label:"Received From",field:"received_from",sortable:!0},{name:"designated_cell",align:"left",label:"Designated Cell",field:"designated_cell",sortable:!0},{name:"name_of_da",align:"left",label:"Name of DA",field:"name_of_da",sortable:!0},{name:"received_date",align:"left",label:"Received Date",field:"received_date",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!0}],w=de(),V=u([]),b=u(""),N=u(!1),c=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),h=u(!1),d=u({}),q=o=>{d.value=o,h.value=!0},F=o=>{w.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{te.delete(route("receipts.destroy",o.id),{onStart:e=>w.loading.show(),onFinish:e=>w.loading.hide(),preserveState:!1})})},I=o=>{b.value=o,o&&n.value!=="all"&&(n.value="all"),o||(n.value=j.value),y({pagination:c.value,filter:o})};function y(o){const{page:e,rowsPerPage:l,sortBy:r,descending:v}=o.pagination,C=o.filter;N.value=!0,axios.get(route("receipts.json-index"),{params:{filter:C,page:e,rowsPerPage:l,month:O.value,year:U.value}}).then(_=>{console.log(_.data);const{list:D}=_.data,{data:Q,per_page:E,current_page:J,total:T,to:Re,from:Ae}=D;V.value=Q,c.value.page=J,c.value.rowsNumber=T,c.value.rowsPerPage=E}).catch(_=>{var D,Q;w.notify({type:"negative",message:(Q=(D=_==null?void 0:_.response)==null?void 0:D.data)==null?void 0:Q.message})}).finally(()=>N.value=!1)}const g=(o,e)=>{try{return o?ue.formatDate(new Date(o),"DD-MM-YYYY"):"N/A"}catch{return"Invalid Date"}},P=["January","February","March","April","May","June","July","August","September","October","November","December"],k=u([]);function Y(){const o=new Date,e=[];e.push({label:"All",value:"all"});for(let l=0;l<12;l++){const r=new Date(o.getFullYear(),o.getMonth()-l,1),v=r.getFullYear(),C=String(r.getMonth()+1).padStart(2,"0");e.push({label:`${P[r.getMonth()]} ${v}`,value:`${v}-${C}`})}k.value=e}const n=u(null),L=S(()=>{if(n.value==="all")return"All";if(!n.value)return"";const[o,e]=n.value.split("-");return new Date(Number(o),Number(e)-1,1).toLocaleString("en-US",{month:"long",year:"numeric"})}),O=S(()=>{var e;if(n.value==="all")return null;const o=((e=n.value)==null?void 0:e.split("-"))||[];return Number(o[1]||null)}),U=S(()=>{var e;if(n.value==="all")return null;const o=((e=n.value)==null?void 0:e.split("-"))||[];return Number(o[0]||null)}),j=u(null);return z(()=>{var o,e;Y(),j.value=((o=k.value[1])==null?void 0:o.value)||null,n.value=((e=k.value[1])==null?void 0:e.value)||null,y({pagination:c.value,filter:b.value})}),G(n,()=>{y({pagination:c.value,filter:b.value})}),(o,e)=>(K(),H(ie,{class:"container",padding:""},{default:t(()=>[s("div",ce,[s("div",null,[s("div",fe,"Receipts - "+i(L.value),1),a(W,{class:"text-dark"},{default:t(()=>[a(R,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:e[0]||(e[0]=l=>o.$inertia.get(o.route("dashboard")))}),a(R,{class:"cursor-pointer",label:"Receipt",onClick:e[1]||(e[1]=l=>o.$inertia.get(o.route("receipts.index")))})]),_:1})]),s("div",me,[a(x,{onClick:e[2]||(e[2]=l=>o.$inertia.get(o.route("receipts.create"))),color:"btn-primary",label:"New Receipt"})])]),e[11]||(e[11]=s("br",null,null,-1)),a(oe,{flat:"",ref:"tableRef",rows:V.value,columns:B,"row-key":"id",pagination:c.value,"onUpdate:pagination":e[5]||(e[5]=l=>c.value=l),loading:N.value,filter:b.value,"binary-state-sort":"","rows-per-page-options":[5,10,15,30,50],onRequest:y},{"top-left":t(()=>[a(ae,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value=l),options:k.value,label:"Select Month",outlined:"",dense:"",style:{width:"180px"},"emit-value":"","map-options":""},null,8,["modelValue","options"])]),"top-right":t(()=>[a(X,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[I,e[4]||(e[4]=l=>b.value=l)],"bg-color":"grey-2",outlined:"",modelValue:b.value,clearable:"",placeholder:"Search"},{append:t(()=>[a(Z,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-s_no":t(l=>[a(f,null,{default:t(()=>[p(i(l.row.s_no),1)]),_:2},1024)]),"body-cell-subject":t(l=>[a(f,{style:{"min-width":"300px","max-width":"400px"}},{default:t(()=>[s("div",be,i(l.row.subject),1)]),_:2},1024)]),"body-cell-letter_date":t(l=>[a(f,null,{default:t(()=>[p(i(g(l.row.letter_date)),1)]),_:2},1024)]),"body-cell-received_from":t(l=>[a(f,null,{default:t(()=>[s("div",ve,i(l.row.received_from),1)]),_:2},1024)]),"body-cell-designated_cell":t(l=>[a(f,null,{default:t(()=>{var r,v;return[a(se,{label:(v=(r=l.row)==null?void 0:r.cell)==null?void 0:v.name,square:""},null,8,["label"])]}),_:2},1024)]),"body-cell-received_date":t(l=>[a(f,null,{default:t(()=>[p(i(g(l.row.received_date)),1)]),_:2},1024)]),"body-cell-action":t(l=>[a(f,null,{default:t(()=>[a(x,{round:"",icon:"more_vert"},{default:t(()=>[a(ne,null,{default:t(()=>[a($,{clickable:"",onClick:r=>q(l.row)},{default:t(()=>[a(M,null,{default:t(()=>e[8]||(e[8]=[p("View Detail")])),_:1,__:[8]})]),_:2},1032,["onClick"]),a($,{clickable:"",onClick:r=>o.$inertia.get(o.route("receipts.edit",l.row.id))},{default:t(()=>[a(M,null,{default:t(()=>e[9]||(e[9]=[p("Edit")])),_:1,__:[9]})]),_:2},1032,["onClick"]),a($,{clickable:"",onClick:r=>F(l.row)},{default:t(()=>[a(M,null,{default:t(()=>e[10]||(e[10]=[p("Delete")])),_:1,__:[10]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"]),a(ee,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=l=>h.value=l),"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a(le,null,{default:t(()=>[a(A,{class:"row items-center justify-between"},{default:t(()=>[s("div",_e,"Receipt - "+i(d.value.s_no),1),a(x,{dense:"",flat:"",icon:"close",onClick:e[6]||(e[6]=l=>h.value=!1)})]),_:1}),a(A,null,{default:t(()=>[s("div",pe,[s("div",ge,[a(m,{label:"Subject",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[s("div",we,i(d.value.subject||"—"),1)]),_:1})]),s("div",he,[a(m,{label:"Received From",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[s("div",ye,i(d.value.received_from||"—"),1)]),_:1})]),s("div",ke,[a(m,{label:"Letter No",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[s("div",De,i(d.value.letter_no||"—"),1)]),_:1})]),s("div",Qe,[a(m,{label:"Letter Date",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[s("div",Ne,i(g(d.value.letter_date)),1)]),_:1})]),s("div",Ce,[a(m,{label:"Designated Cell",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>{var l,r;return[s("div",Se,i(((r=(l=d.value)==null?void 0:l.cell)==null?void 0:r.name)||"—"),1)]}),_:1})]),s("div",xe,[a(m,{label:"Name of DA",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[s("div",$e,i(g(d.value.name_of_da)||"—"),1)]),_:1})]),s("div",Me,[a(m,{label:"Issue Date",outlined:"","stack-label":"","bg-color":"white"},{default:t(()=>[s("div",Ve,i(g(d.value.received_date)||"—"),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[11]}))}});export{Je as default};
